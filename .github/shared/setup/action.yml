---
name: "Setup Environment"
description: "Install dependencies in the most efficient way for Node/Bun project."

inputs:
  node-version:
    description: "Node Version"
  pnpm-version:
    description: "Pnpm Version"

runs:
  using: "composite"
  steps:
    - name: Prepare System
      uses: awalsh128/cache-apt-pkgs-action@latest
      with:
        packages: build-essential libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev
        version: 1.0

    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Setup Pnpm
      uses: pnpm/action-setup@v4
      with:
        version: ${{ inputs.pnpm-version }}

    - name: Setup Environment
      uses: 0xTheProDev/setup-js@v1
      with:
        cache: pnpm
        registry-url: "https://registry.npmjs.org"
        version: ${{ inputs.node-version }}

branding:
  icon: "package"
  color: "green"
